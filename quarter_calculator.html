<!DOCTYPE html>
<html lang="en">
<head>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-LNMT1VXJW1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-LNMT1VXJW1');
</script>

<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Quarter Grade Calculator</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
<style>
  :root {
      --primary-bg: #1a1a1a;
      --secondary-bg: #2E2E2E;
      --input-bg: #3B3B3B;
      --text-color: #F1F1F1;
      --text-secondary: #D1D1D1;
      --accent-color: #4CAF50;
      --accent-hover: #45a049;
      --link-color: #64B5F6;
      --border-color: #555;
      --card-bg: #333333;
      --nav-bg: #222222;
      --highlight-bg: rgba(76, 175, 80, 0.15);
  }

  * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
  }

  body {
      background-color: var(--primary-bg);
      color: var(--text-color);
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      line-height: 1.6;
      padding-bottom: 2rem;
  }

  .navbar {
      background-color: var(--nav-bg);
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
      position: sticky;
      top: 0;
      z-index: 100;
  }

  .container {
      width: 100%;
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 1rem;
  }

  .nav-container {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 1rem;
  }

  .logo {
      font-size: 1.5rem;
      font-weight: bold;
      color: var(--text-color);
      text-decoration: none;
      display: flex;
      align-items: center;
  }

  .logo i {
      margin-right: 0.5rem;
      color: var(--accent-color);
  }

  .nav-links {
      display: flex;
      list-style: none;
  }

  .nav-links li {
      margin-left: 1.5rem;
  }

  .nav-links a {
      color: var(--text-color);
      text-decoration: none;
      font-weight: 500;
      transition: color 0.3s;
      display: flex;
      align-items: center;
  }

  .nav-links a:hover {
      color: var(--accent-color);
  }

  .nav-links a.active {
      color: var(--accent-color);
      font-weight: 600;
  }

  .nav-links a i {
      margin-right: 0.5rem;
  }

  .mobile-menu-btn {
      display: none;
      background: none;
      border: none;
      color: var(--text-color);
      font-size: 1.5rem;
      cursor: pointer;
  }

  .card {
      background-color: var(--card-bg);
      border-radius: 10px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
      padding: 2rem;
      margin: 2rem 0;
  }

  h2 {
      color: var(--text-color);
      margin-bottom: 1.5rem;
      font-weight: 600;
      text-align: center;
      font-size: 1.8rem;
  }

  h3 {
      color: var(--text-color);
      margin: 1rem 0;
      font-weight: 500;
  }

  .form-group {
      margin-bottom: 1rem;
  }

  label {
      display: block;
      color: var(--text-secondary);
      margin-bottom: 0.5rem;
      font-weight: 500;
  }

  input, select {
      background-color: var(--input-bg);
      color: var(--text-color);
      border: 1px solid var(--border-color);
      border-radius: 5px;
      padding: 0.75rem;
      width: 100%;
      font-size: 1rem;
      transition: border-color 0.3s;
  }

  input:focus, select:focus {
      outline: none;
      border-color: var(--accent-color);
  }

  .input-row {
      display: flex;
      flex-wrap: wrap;
      gap: 1rem;
      margin-bottom: 1rem;
  }

  .input-group {
      flex: 1;
      min-width: 200px;
  }

  .btn-group {
      display: flex;
      gap: 1rem;
      margin: 1.5rem 0;
      flex-wrap: wrap;
  }

  button {
      cursor: pointer;
      background-color: var(--accent-color);
      color: white;
      border: none;
      border-radius: 5px;
      padding: 0.75rem 1.5rem;
      font-size: 1rem;
      font-weight: 500;
      transition: background-color 0.3s;
      flex: 1;
      min-width: 150px;
      display: flex;
      align-items: center;
      justify-content: center;
  }

  button:hover {
      background-color: var(--accent-hover);
  }

  button i {
      margin-right: 0.5rem;
  }

  .btn-clear {
      background-color: #f44336;
  }

  .btn-clear:hover {
      background-color: #d32f2f;
  }

  .result-section {
      background-color: var(--secondary-bg);
      border-radius: 8px;
      padding: 1.5rem;
      margin-top: 1.5rem;
  }

  .result-section h3 {
      margin-top: 0;
      color: var(--accent-color);
  }

  .footer {
      text-align: center;
      padding: 1rem 0;
      margin-top: 2rem;
      color: var(--text-secondary);
      font-size: 0.9rem;
  }

  /* Specific styles for Quarter Calculator */
  .category-section {
      border: 1px solid var(--border-color);
      border-radius: 8px;
      padding: 1.5rem;
      background-color: var(--secondary-bg);
      margin-bottom: 1.5rem;
  }

  .category-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1rem;
  }

  .category-header h3 {
      margin: 0;
      color: var(--accent-color);
  }

  .category-header .input-group {
      flex: none;
      width: 120px; /* Fixed width for weight input */
      margin-left: 1rem;
  }

  .assignment-inputs {
      display: flex;
      flex-direction: column;
      gap: 1rem;
  }

  /* Styles for assignment inputs (matching GPA calculator's class inputs) */
  .class-input-row {
      display: flex;
      flex-wrap: wrap;
      gap: 1rem;
      margin-bottom: 1rem;
      align-items: flex-end; /* Align items at the bottom */
      border: 1px solid var(--border-color);
      border-radius: 8px;
      padding: 1rem;
      background-color: var(--secondary-bg);
  }

  .class-input-group {
      flex: 1;
      min-width: 150px; /* Adjust as needed */
  }

  .class-input-group label {
      white-space: nowrap; /* Prevent label from wrapping */
  }

  .remove-class-btn {
      background-color: #f44336;
      color: white;
      border: none;
      border-radius: 5px;
      padding: 0.5rem 1rem;
      font-size: 0.9rem;
      cursor: pointer;
      transition: background-color 0.3s;
      flex-shrink: 0;
      min-width: auto;
  }

  /* Styles for the new checkbox container (already consistent) */
  .checkbox-option-container {
      border: 1px solid var(--border-color);
      border-radius: 8px;
      padding: 1rem;
      background-color: var(--secondary-bg);
      margin-top: 1rem;
      margin-bottom: 1rem;
      display: flex;
      align-items: center;
      gap: 1rem; /* Increased gap for better spacing */
      justify-content: space-between; /* Push label to left, toggle to right */
  }

  .checkbox-option-container label {
      flex-grow: 1; /* Allow label to take available space */
      margin-bottom: 0; /* Ensure no extra margin */
  }

  /* Style for hidden assignment name input group (matching GPA calculator's class name input group) */
  .class-name-input-group {
      display: none; /* Hidden by default */
  }

  /* Toggle Button Styles */
  .toggle-button {
      width: 50px; /* Width of the toggle switch */
      height: 26px; /* Height of the toggle switch */
      background-color: var(--input-bg); /* Off state background */
      border-radius: 13px; /* Half of height for pill shape */
      position: relative;
      cursor: pointer;
      transition: background-color 0.3s;
      flex-shrink: 0; /* Prevent shrinking in flex container */
      border: 1px solid var(--border-color); /* Add a subtle border */
  }

  .toggle-button.toggled {
      background-color: var(--accent-color); /* On state background */
  }

  .toggle-handle {
      width: 20px; /* Size of the draggable circle */
      height: 20px;
      background-color: var(--text-color); /* Handle color */
      border-radius: 50%;
      position: absolute;
      top: 2px; /* Center vertically */
      left: 2px; /* Initial position (off state) */
      transition: left 0.3s;
  }

  .toggle-button.toggled .toggle-handle {
      left: calc(100% - 2px - 20px); /* Move to right (on state) */
  }
</style>
<script>
  let categoryCounters = {
      'learnerTasks': 0,
      'assessments': 0,
      'custom': 0,
      'assignments': 0 // New counter for single assignments view
  };

  document.addEventListener('DOMContentLoaded', function() {
      // Add event listeners for Quarter Calculator
      document.getElementById('calculateQuarterBtn').addEventListener('click', calculateQuarterGrade);
      document.getElementById('clearQuarterFieldsBtn').addEventListener('click', clearQuarterFields);

      // Add event listeners for "Add Assignment" buttons
      document.getElementById('addLearnerTasksBtn').addEventListener('click', () => addAssignmentInput('learnerTasks'));
      document.getElementById('addAssessmentsBtn').addEventListener('click', () => addAssignmentInput('assessments'));
      document.getElementById('addCustomBtn').addEventListener('click', () => addAssignmentInput('custom'));
      document.getElementById('addAssignmentBtn').addEventListener('click', () => addAssignmentInput('assignments')); // New button for single view

      // Add event listener for the "Show Assignment Names" toggle button
      document.getElementById('showAssignmentNamesToggle').addEventListener('click', toggleAssignmentNamesVisibility);
      // Add event listener for the "Group View" toggle button
      document.getElementById('groupViewToggle').addEventListener('click', toggleGroupView);

      // Initial visibility check for assignment names and group view
      // Set initial states based on data-toggled attributes
      const initialGroupView = document.getElementById('groupViewToggle').getAttribute('data-toggled') === 'true';
      const initialShowNames = document.getElementById('showAssignmentNamesToggle').getAttribute('data-toggled') === 'true';
      
      // Apply initial states without triggering full recalculation/clearing
      document.getElementById('groupedCategories').style.display = initialGroupView ? 'block' : 'none';
      document.getElementById('singleAssignmentCategory').style.display = initialGroupView ? 'none' : 'block';
      
      const nameInputGroups = document.querySelectorAll('.class-name-input-group');
      nameInputGroups.forEach(group => {
          group.style.display = initialShowNames ? 'block' : 'none';
      });
      // Update labels for existing inputs if any (e.g., after a page refresh with existing inputs)
      const allCategories = ['learnerTasks', 'assessments', 'custom', 'assignments'];
      allCategories.forEach(category => {
          updateAssignmentNumbers(category);
      });
  });

  function toggleMenu() {
      const navLinks = document.querySelector('.nav-links');
      navLinks.classList.toggle('active');
  }

  function toggleGroupView() {
      const toggleElement = document.getElementById('groupViewToggle');
      let isGroupView = toggleElement.getAttribute('data-toggled') === 'true';
      isGroupView = !isGroupView; // Flip the state

      toggleElement.setAttribute('data-toggled', isGroupView);
      toggleElement.setAttribute('aria-checked', isGroupView); // Update ARIA attribute
      toggleElement.classList.toggle('toggled', isGroupView);

      document.getElementById('groupedCategories').style.display = isGroupView ? 'block' : 'none';
      document.getElementById('singleAssignmentCategory').style.display = isGroupView ? 'none' : 'block';
      
      clearQuarterFields(false); // Pass false to prevent re-toggling group view
      calculateQuarterGrade(); // Recalculate based on new view
  }

  function addAssignmentInput(category) {
      categoryCounters[category]++;
      const container = document.getElementById(`${category}Assignments`);
      // Read the state directly from the toggle button's data-toggled attribute
      const showAssignmentNames = document.getElementById('showAssignmentNamesToggle').getAttribute('data-toggled') === 'true';

      const assignmentRow = document.createElement('div');
      assignmentRow.classList.add('class-input-row'); // Use GPA calculator's row style
      assignmentRow.setAttribute('data-category', category); // Store category for re-numbering
      assignmentRow.setAttribute('data-assignment-index', categoryCounters[category]); // Store original index

      // Assignment Name input (new)
      const nameInputGroup = document.createElement('div');
      nameInputGroup.classList.add('class-input-group', 'class-name-input-group'); // Use GPA calculator's input group style
      if (showAssignmentNames) {
          nameInputGroup.style.display = 'block'; // Show if toggle is on
      }
      const nameLabel = document.createElement('label');
      nameLabel.setAttribute('for', `${category}Name${categoryCounters[category]}`);
      nameLabel.innerText = `${formatCategoryName(category)} ${categoryCounters[category]} Name`;
      const nameInput = document.createElement('input');
      nameInput.setAttribute('type', 'text');
      nameInput.setAttribute('id', `${category}Name${categoryCounters[category]}`);
      nameInput.setAttribute('placeholder', `e.g., Chapter 1 Quiz`);
      nameInput.classList.add('assignment-name-input'); // Keep this class for specific targeting if needed
      nameInputGroup.appendChild(nameLabel);
      nameInputGroup.appendChild(nameInput);
      assignmentRow.appendChild(nameInputGroup);

      // Assignment Grade (%) input
      const gradeInputGroup = document.createElement('div');
      gradeInputGroup.classList.add('class-input-group'); // Use GPA calculator's input group style
      const gradeLabel = document.createElement('label');
      gradeLabel.setAttribute('for', `${category}Grade${categoryCounters[category]}`);
      gradeLabel.innerText = `${formatCategoryName(category)} ${categoryCounters[category]} Grade (%)`;
      const gradeInput = document.createElement('input');
      gradeInput.setAttribute('type', 'number');
      gradeInput.setAttribute('id', `${category}Grade${categoryCounters[category]}`);
      gradeInput.setAttribute('min', '0');
      gradeInput.setAttribute('max', '100');
      gradeInput.setAttribute('placeholder', 'Enter grade');
      gradeInput.classList.add('assignment-grade-input'); // Add a specific class for this calculator
      gradeInputGroup.appendChild(gradeLabel);
      gradeInputGroup.appendChild(gradeInput);
      assignmentRow.appendChild(gradeInputGroup);

      // Assignment Weight (%) input (only for 'assignments' category)
      if (category === 'assignments') {
          const weightInputGroup = document.createElement('div');
          weightInputGroup.classList.add('class-input-group');
          const weightLabel = document.createElement('label');
          weightLabel.setAttribute('for', `${category}Weight${categoryCounters[category]}`);
          weightLabel.innerText = `Weight (%)`;
          const weightInput = document.createElement('input');
          weightInput.setAttribute('type', 'number');
          weightInput.setAttribute('id', `${category}Weight${categoryCounters[category]}`);
          weightInput.setAttribute('min', '0');
          weightInput.setAttribute('max', '100');
          weightInput.setAttribute('value', '100'); // Default weight for individual assignments
          weightInput.setAttribute('placeholder', 'e.g., 100');
          weightInput.classList.add('assignment-weight-input');
          weightInputGroup.appendChild(weightLabel);
          weightInputGroup.appendChild(weightInput);
          assignmentRow.appendChild(weightInputGroup);
      }

      // Remove Assignment button
      const removeButton = document.createElement('button');
      removeButton.classList.add('remove-class-btn'); // Use GPA calculator's remove button style
      removeButton.innerText = 'Remove';
      removeButton.onclick = function() {
          assignmentRow.remove();
          updateAssignmentNumbers(category); // Re-number assignments within this category
          calculateQuarterGrade(); // Recalculate after removal
      };
      assignmentRow.appendChild(removeButton);

      container.appendChild(assignmentRow);
      updateAssignmentNumbers(category); // Re-number assignments after adding
  }

  function updateAssignmentNumbers(category) {
      const assignmentRows = document.querySelectorAll(`#${category}Assignments .class-input-row`);
      const showAssignmentNames = document.getElementById('showAssignmentNamesToggle').getAttribute('data-toggled') === 'true';

      assignmentRows.forEach((row, index) => {
          const assignmentNum = index + 1;
          const categoryName = row.getAttribute('data-category');

          // Update labels and IDs for name input
          const nameInputGroup = row.querySelector('.class-name-input-group');
          if (nameInputGroup) { // Ensure the group exists before trying to set display
              nameInputGroup.style.display = showAssignmentNames ? 'block' : 'none';
          }
          const nameLabel = row.querySelector(`label[for^="${categoryName}Name"]`);
          const nameInput = row.querySelector(`input[id^="${categoryName}Name"]`);
          if (nameLabel && nameInput) {
              nameLabel.setAttribute('for', `${categoryName}Name${assignmentNum}`);
              nameInput.setAttribute('id', `${categoryName}Name${assignmentNum}`);
              nameLabel.innerText = `${formatCategoryName(categoryName)} ${assignmentNum} Name`;
          }

          // Update labels and IDs for grade input
          const gradeLabel = row.querySelector(`label[for^="${categoryName}Grade"]`);
          const gradeInput = row.querySelector(`input[id^="${categoryName}Grade"]`);
          if (gradeLabel && gradeInput) {
              gradeLabel.setAttribute('for', `${categoryName}Grade${assignmentNum}`);
              gradeInput.setAttribute('id', `${categoryName}Grade${assignmentNum}`);
              if (!showAssignmentNames) {
                  gradeLabel.innerText = `${formatCategoryName(categoryName)} ${assignmentNum} Grade (%)`;
              } else {
                  gradeLabel.innerText = `Grade (%)`;
              }
          }

          // Update labels and IDs for weight input (only for 'assignments' category)
          if (categoryName === 'assignments') {
              const weightLabel = row.querySelector(`label[for^="${categoryName}Weight"]`);
              const weightInput = row.querySelector(`input[id^="${categoryName}Weight"]`);
              if (weightLabel && weightInput) {
                  weightLabel.setAttribute('for', `${categoryName}Weight${assignmentNum}`);
                  weightInput.setAttribute('id', `${categoryName}Weight${assignmentNum}`);
              }
          }
      });
  }

  function toggleAssignmentNamesVisibility() {
      const toggleElement = document.getElementById('showAssignmentNamesToggle');
      let showNames = toggleElement.getAttribute('data-toggled') === 'true';
      showNames = !showNames; // Flip the state

      toggleElement.setAttribute('data-toggled', showNames);
      toggleElement.setAttribute('aria-checked', showNames); // Update ARIA attribute
      toggleElement.classList.toggle('toggled', showNames);

      const nameInputGroups = document.querySelectorAll('.class-name-input-group');
      nameInputGroups.forEach(group => {
          group.style.display = showNames ? 'block' : 'none';
      });

      const allCategories = ['learnerTasks', 'assessments', 'custom', 'assignments'];
      allCategories.forEach(category => {
          updateAssignmentNumbers(category);
      });
  }

  function formatCategoryName(category) {
      // Convert camelCase to Title Case with spaces
      if (category === 'assignments') {
          return 'Assignment'; // Special case for the single category
      }
      return category.replace(/([A-Z])/g, ' $1')
                     .replace(/^./, function(str){ return str.toUpperCase(); });
  }

  function calculateQuarterGrade() {
      const isGroupView = document.getElementById('groupViewToggle').getAttribute('data-toggled') === 'true';
      let totalWeightedSum = 0;
      let totalWeight = 0;
      let resultText = "";

      if (isGroupView) {
          const categories = ['learnerTasks', 'assessments', 'custom'];
          categories.forEach(category => {
              const weightInput = document.getElementById(`${category}Weight`);
              const categoryWeight = parseFloat(weightInput.value) || 0;
              
              const assignmentInputs = document.querySelectorAll(`#${category}Assignments input.assignment-grade-input`);
              let categoryGrades = [];
              assignmentInputs.forEach(input => {
                  const grade = parseFloat(input.value);
                  if (!isNaN(grade) && grade >= 0 && grade <= 100) {
                      categoryGrades.push(grade);
                  }
              });

              if (categoryGrades.length > 0) {
                  const categoryAverage = categoryGrades.reduce((sum, grade) => sum + grade, 0) / categoryGrades.length;
                  totalWeightedSum += categoryAverage * categoryWeight;
                  totalWeight += categoryWeight;
              }
          });
      } else {
          // Single "Assignments" category view with individual weights
          const assignmentRows = document.querySelectorAll(`#assignmentsAssignments .class-input-row`);
          assignmentRows.forEach(row => {
              const gradeInput = row.querySelector('.assignment-grade-input');
              const weightInput = row.querySelector('.assignment-weight-input');

              const grade = parseFloat(gradeInput.value);
              const weight = parseFloat(weightInput.value);

              if (!isNaN(grade) && grade >= 0 && grade <= 100 && !isNaN(weight) && weight >= 0) {
                  totalWeightedSum += grade * weight;
                  totalWeight += weight;
              }
          });
      }

      let quarterGrade = 0;
      if (totalWeight > 0) {
          quarterGrade = totalWeightedSum / totalWeight;
          resultText = `Your Quarter Grade: ${quarterGrade.toFixed(2)}%`;
      } else {
          resultText = "Please enter grades and weights to calculate.";
      }

      document.getElementById('quarterResult').innerText = resultText;

      // Optional: Calculate needed grade if desired grade is provided
      const desiredGrade = parseFloat(document.getElementById('desiredQuarterGrade').value);
      const desiredGradeStatusElement = document.getElementById('desiredGradeStatus');
      desiredGradeStatusElement.innerText = ""; // Clear previous status

      if (!isNaN(desiredGrade) && desiredGrade > 0) {
          if (totalWeight === 100) { // This logic assumes totalWeight is 100 for grouped view, or sum of individual weights is 100 for single view
              if (quarterGrade >= desiredGrade) {
                  desiredGradeStatusElement.innerText = "Desired grade achieved!";
                  desiredGradeStatusElement.style.color = "var(--accent-color)";
              } else {
                  desiredGradeStatusElement.innerText = "Desired grade not met with current inputs.";
                  desiredGradeStatusElement.style.color = "#f44336";
              }
          } else if (totalWeight < 100) {
              // This part of the logic needs careful consideration for the single assignment view
              // where totalWeight can be arbitrary. For simplicity, I'll keep it as is,
              // but a more robust solution might require knowing the 'total possible weight'
              // if not all assignments are entered.
              // For now, I'll just indicate if the desired grade is met or not.
              if (!isGroupView && totalWeight > 0) { // If in single view and some weights are entered
                  if (quarterGrade >= desiredGrade) {
                      desiredGradeStatusElement.innerText = "Desired grade achieved with current inputs!";
                      desiredGradeStatusElement.style.color = "var(--accent-color)";
                  } else {
                      desiredGradeStatusElement.innerText = "Desired grade not met with current inputs.";
                      desiredGradeStatusElement.style.color = "#f44336";
                  }
              } else { // Original logic for grouped view or if totalWeight is 0 in single view
                  let remainingWeight = 100 - totalWeight;
                  let maxPossibleGrade = (totalWeightedSum + (remainingWeight * 100)) / 100;
                  let minPossibleGrade = (totalWeightedSum + (remainingWeight * 0)) / 100;

                  if (desiredGrade > maxPossibleGrade) {
                      desiredGradeStatusElement.innerText = "Not possible to achieve desired grade.";
                      desiredGradeStatusElement.style.color = "#f44336";
                  } else if (desiredGrade <= minPossibleGrade) {
                      desiredGradeStatusElement.innerText = "Desired grade already achieved!";
                      desiredGradeStatusElement.style.color = "var(--accent-color)";
                  } else {
                      let neededAvgForRemaining = (desiredGrade * 100 - totalWeightedSum) / remainingWeight;
                      desiredGradeStatusElement.innerText = `You need an average of ${neededAvgForRemaining.toFixed(2)}% on remaining assignments.`;
                      desiredGradeStatusElement.style.color = "var(--text-secondary)";
                  }
              }
          } else { // totalWeight > 100
              if (quarterGrade >= desiredGrade) {
                  desiredGradeStatusElement.innerText = "Desired grade achieved!";
                  desiredGradeStatusElement.style.color = "var(--accent-color)";
              } else {
                  desiredGradeStatusElement.innerText = "Desired grade not met with current inputs.";
                  desiredGradeStatusElement.style.color = "#f44336";
              }
          }
      }
  }

  function clearQuarterFields(shouldToggleGroupView = true) {
      // Clear all number and text inputs in all category sections
      document.querySelectorAll('.category-section input[type="number"]').forEach(input => input.value = '');
      document.querySelectorAll('.category-section input[type="text"]').forEach(input => input.value = '');
      
      // Clear all dynamic assignment inputs
      document.querySelectorAll('.assignment-inputs').forEach(container => {
          container.innerHTML = '';
      });

      // Clear desired grade and results
      document.getElementById('desiredQuarterGrade').value = '';
      document.getElementById('quarterResult').innerText = '';
      document.getElementById('desiredGradeStatus').innerText = '';

      // Reset all counters
      categoryCounters = {
          'learnerTasks': 0,
          'assessments': 0,
          'custom': 0,
          'assignments': 0
      };
      
      // Reset toggle buttons to their default states
      const showNamesToggle = document.getElementById('showAssignmentNamesToggle');
      showNamesToggle.setAttribute('data-toggled', 'false');
      showNamesToggle.setAttribute('aria-checked', 'false');
      showNamesToggle.classList.remove('toggled');

      if (shouldToggleGroupView) {
          const groupViewToggle = document.getElementById('groupViewToggle');
          groupViewToggle.setAttribute('data-toggled', 'true'); // Default to group view ON
          groupViewToggle.setAttribute('aria-checked', 'true');
          groupViewToggle.classList.add('toggled');
      }
      
      // Re-apply visibility based on reset toggle states
      toggleAssignmentNamesVisibility();
      if (shouldToggleGroupView) {
          toggleGroupView();
      }
  }
</script>
</head>
<body>
<nav class="navbar">
  <div class="nav-container">
      <a href="index.html" class="logo">
          <i class="fas fa-calculator"></i>
          Grade Calculator
      </a>
      <button class="mobile-menu-btn" onclick="toggleMenu()">
          <i class="fas fa-bars"></i>
      </button>
      <ul class="nav-links">
          <li><a href="index.html"><i class="fas fa-home"></i> Full-Year Calculator</a></li>
          <li><a href="half_semester_calculator.html"><i class="fas fa-calendar-alt"></i> Half-Year Calculator</a></li>
          <li><a href="quarter_calculator.html" class="active"><i class="fas fa-percent"></i> Quarter Calculator</a></li>
          <li><a href="unweighted_gpa_calculator.html"><i class="fas fa-graduation-cap"></i> GPA Calculator</a></li>
      </ul>
  </div>
</nav>

<div class="container">
  <div class="card">
      <h2>Quarter Grade Calculator</h2>
      <p style="color: var(--text-secondary); margin-bottom: 1.5rem; text-align: center;">
          Calculate your quarter grade by entering grades for different assignment categories and their weights.
      </p>
      
      <!-- Group View Toggle -->
      <div class="checkbox-option-container">
          <label for="groupViewToggle">Group View</label>
          <div id="groupViewToggle" class="toggle-button toggled" data-toggled="true" tabindex="0" role="switch" aria-checked="true">
              <div class="toggle-handle"></div>
          </div>
      </div>

      <!-- Show Assignment Names Toggle -->
      <div class="checkbox-option-container">
          <label for="showAssignmentNamesToggle">Show Assignment Names</label>
          <div id="showAssignmentNamesToggle" class="toggle-button" data-toggled="false" tabindex="0" role="switch" aria-checked="false">
              <div class="toggle-handle"></div>
          </div>
      </div>

      <!-- Grouped Categories Section (Default) -->
      <div id="groupedCategories">
          <!-- Learner Tasks Category -->
          <div class="category-section">
              <div class="category-header">
                  <h3>Learner Tasks</h3>
                  <div class="input-group">
                      <label for="learnerTasksWeight">Weight (%)</label>
                      <input type="number" id="learnerTasksWeight" min="0" max="100" value="30" placeholder="e.g., 30">
                  </div>
              </div>
              <div id="learnerTasksAssignments" class="assignment-inputs">
                  <!-- Learner Tasks assignment inputs will be added here -->
              </div>
              <button id="addLearnerTasksBtn" style="margin-top: 1rem;">
                  <i class="fas fa-plus-circle"></i> Add Learner Task Grade
              </button>
          </div>

          <!-- Assessments Category -->
          <div class="category-section">
              <div class="category-header">
                  <h3>Assessments</h3>
                  <div class="input-group">
                      <label for="assessmentsWeight">Weight (%)</label>
                      <input type="number" id="assessmentsWeight" min="0" max="100" value="50" placeholder="e.g., 50">
                  </div>
              </div>
              <div id="assessmentsAssignments" class="assignment-inputs">
                  <!-- Assessments assignment inputs will be added here -->
              </div>
              <button id="addAssessmentsBtn" style="margin-top: 1rem;">
                  <i class="fas fa-plus-circle"></i> Add Assessment Grade
              </button>
          </div>

          <!-- Custom Category -->
          <div class="category-section">
              <div class="category-header">
                  <h3>Custom</h3>
                  <div class="input-group">
                      <label for="customWeight">Weight (%)</label>
                      <input type="number" id="customWeight" min="0" max="100" value="20" placeholder="e.g., 20">
                  </div>
              </div>
              <div id="customAssignments" class="assignment-inputs">
                  <!-- Custom assignment inputs will be added here -->
              </div>
              <button id="addCustomBtn" style="margin-top: 1rem;">
                  <i class="fas fa-plus-circle"></i> Add Custom Grade
              </button>
          </div>
      </div>

      <!-- Single Assignment Category Section (Hidden by Default) -->
      <div id="singleAssignmentCategory" style="display: none;">
          <div class="category-section">
              <div class="category-header">
                  <h3>Assignments</h3>
                  <!-- The overall weight input for "Assignments" category is now removed -->
              </div>
              <div id="assignmentsAssignments" class="assignment-inputs">
                  <!-- Single assignment inputs will be added here -->
              </div>
              <button id="addAssignmentBtn" style="margin-top: 1rem;">
                  <i class="fas fa-plus-circle"></i> Add Assignment Grade
              </button>
          </div>
      </div>
      
      <div class="btn-group">
          <button id="calculateQuarterBtn">
              <i class="fas fa-calculator"></i> Calculate Quarter Grade
          </button>
          <button class="btn-clear" id="clearQuarterFieldsBtn">
              <i class="fas fa-trash-alt"></i> Clear All Fields
          </button>
      </div>
      
      <div class="result-section">
          <h3><span id="quarterResult"></span></h3>
          <div class="form-group">
              <label for="desiredQuarterGrade">Desired Quarter Grade (%) (Optional)</label>
              <input type="number" id="desiredQuarterGrade" min="0" max="100" placeholder="Enter your target grade">
          </div>
          <h3 style="color: var(--text-secondary);">Desired Grade Status: <span id="desiredGradeStatus"></span></h3>
      </div>
  </div>
</div>
<footer class="footer">
  <div class="container">
      <p>Created by Advaith S, 2025</p>
  </div>
</footer>
</body>
</html>
